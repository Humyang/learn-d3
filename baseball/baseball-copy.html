<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <!-- <script src="https://d3js.org/d3.v4.min.js"></script> -->

    <script src="./vendor/jquery-3.3.1.min.js"></script>
    <script src="./vendor/d3/d3.v5.js"></script>
    <title>数组</title>
</head>

<body>
    <svg class="svg1"></svg>
    <script>
        window.onload=function(){
            var w = 950
            var h = 540
            let padding = 20
            var svg = d3.select('.svg1').attr("width", w).attr("height", h)
            
            let averageByCount = []

            d3.dsv(",", "./teams.csv", 
                // function(d) {
                //     return {
                //         year: new Date(+d.Year, 0, 1), // convert "Year" column to Date
                //         make: d.Make,
                //         model: d.Model,
                //         length: +d.Length // convert "Length" column to number
                // };}
            )
            .then(function(data) {
                // console.log(data);
            });
            d3.dsv(",", "./average-by-count.csv", 
                // function(d) {
                //     return {
                //         year: new Date(+d.Year, 0, 1), // convert "Year" column to Date
                //         make: d.Make,
                //         model: d.Model,
                //         length: +d.Length // convert "Length" column to number
                // };}
            )
            .then(function(data) {
                // console.log(data);
                averageByCount = data
                generation()
            });
            function generation(){
                // 生成底部坐标轴
                // d3.range(
                //     d3.min(averageByCount,function(d){return d.year}),
                //     d3.max(averageByCount,function(d){return d.year}))
                let scale = d3.scaleLinear()
                .domain(
                    [+d3.min(averageByCount,function(d){return d.year}),
                    +d3.max(averageByCount,function(d){return d.year})])
                .range([0+padding,w-padding])
                let xAxis = d3.axisBottom(scale)
                
                console.log('min',d3.min(averageByCount,function(d){return d.year}),d3.max(averageByCount,function(d){return d.year}))
                svg.append('g').call(xAxis).attr('transform','translate(0,'+(h-padding)+')')
                
            }
            // d3.
            // 创建一个坐标轴,位于底部（bottome)
            // var xAxis = d3.axis()
            //     .scale(x)
            //     .orient("bottom");

            // // 创建一个坐标轴，位于左侧
            // var yAxis = d3.axis()
            //     .scale(y)
            //     .orient("left").ticks(10, "%");
        }

    </script>
</body>

</html> 